<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Atmospheric and emissivity correction for othomosaics — ortho_correct • theRmalUAV</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Atmospheric and emissivity correction for othomosaics — ortho_correct"><meta name="description" content="ortho_correct() executes atmospheric and emissivity corrections on already stitched maps.
This function can be used if only single values for the atmospheric parameters collected or when data from integrated cameras have difficulties with stitching thermal data separately.
Within flight variations are not captured in this function."><meta property="og:description" content="ortho_correct() executes atmospheric and emissivity corrections on already stitched maps.
This function can be used if only single values for the atmospheric parameters collected or when data from integrated cameras have difficulties with stitching thermal data separately.
Within flight variations are not captured in this function."><meta property="og:image" content="https://christophemetsu.github.io/theRmalUAV/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">theRmalUAV</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Atmospheric and emissivity correction for othomosaics</h1>

      <div class="d-none name"><code>ortho_correct.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>ortho_correct()</code> executes atmospheric and emissivity corrections on already stitched maps.
This function can be used if only single values for the atmospheric parameters collected or when data from integrated cameras have difficulties with stitching thermal data separately.
Within flight variations are not captured in this function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ortho_correct</span><span class="op">(</span></span>
<span>  thermal_ortho <span class="op">=</span> <span class="va">thermal_ortho</span>,</span>
<span>  temp <span class="op">=</span> <span class="st">"C"</span>,</span>
<span>  flight_height <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  T_air <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  rel_hum <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  T_bg <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SKC <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  emiss <span class="op">=</span> <span class="fl">0.985</span>,</span>
<span>  method <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  corrmap <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  return_emis <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  NDVI_veg <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  NDVI_soil <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  emiss_veg <span class="op">=</span> <span class="fl">0.988</span>,</span>
<span>  emiss_soil <span class="op">=</span> <span class="fl">0.935</span>,</span>
<span>  LC_emiss_matrix <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-thermal-ortho">thermal_ortho<a class="anchor" aria-label="anchor" href="#arg-thermal-ortho"></a></dt>
<dd><p>Map (<code><a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">SpatRaster</a></code>) or path to geotiff file (chr) containing brightness temperatures</p></dd>


<dt id="arg-temp">temp<a class="anchor" aria-label="anchor" href="#arg-temp"></a></dt>
<dd><p>Indicate in which scale the "thermal_ortho" map represents the temperatures. Use "K" for Kelvin and "C" for degree Celcius.</p></dd>


<dt id="arg-flight-height">flight_height<a class="anchor" aria-label="anchor" href="#arg-flight-height"></a></dt>
<dd><p>(numerical) the height between the camera and the OBJECT OF INTEREST expressed in meters.</p></dd>


<dt id="arg-t-air">T_air<a class="anchor" aria-label="anchor" href="#arg-t-air"></a></dt>
<dd><p>(numerical) the air temperature in  deg C during the flight. If NA it will use a trimmed mean of the temperatures in the thermal_ortho map.</p></dd>


<dt id="arg-rel-hum">rel_hum<a class="anchor" aria-label="anchor" href="#arg-rel-hum"></a></dt>
<dd><p>(numerical) the relative humidity in % during the flight. If not provided a value of 50% is assumed.</p></dd>


<dt id="arg-t-bg">T_bg<a class="anchor" aria-label="anchor" href="#arg-t-bg"></a></dt>
<dd><p>(numerical) the background temperature in Kelvin, temperature measured from the aluminium panel. If not recorded set to NA and the parameter will be estimated using ("T_air"), in this case, you need to specify whether the sky was clear ("SKC" = TRUE) or overcast ("SKC" = FALSE).</p></dd>


<dt id="arg-skc">SKC<a class="anchor" aria-label="anchor" href="#arg-skc"></a></dt>
<dd><p>(logical) if the conditions were sky clear, set to TRUE, if there was an overcast set to FALSE (default = TRUE), only needed when T_bg is not specified.</p></dd>


<dt id="arg-emiss">emiss<a class="anchor" aria-label="anchor" href="#arg-emiss"></a></dt>
<dd><p>(numerical) the emissivity, here by default an average for plants is given (0.985)</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Indicate which variable the correction map provides. Use "LC" when landcover is provided, "NDVI" if you want to use the NDVI method or "EM" when emissivity is provided. Set to NA if no spatial information on the emissivity can be calculated.</p></dd>


<dt id="arg-corrmap">corrmap<a class="anchor" aria-label="anchor" href="#arg-corrmap"></a></dt>
<dd><p>Map (<code><a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">SpatRaster</a></code>) or path to geotiff file (chr) for emissivity correction. This can either be a landcover map, an NDVI map or a emissivity map.</p></dd>


<dt id="arg-return-emis">return_emis<a class="anchor" aria-label="anchor" href="#arg-return-emis"></a></dt>
<dd><p>(logical) when set to TRUE, the calcualted emissivty map is returned together with the surface temperature as raster stack</p></dd>


<dt id="arg-ndvi-veg">NDVI_veg<a class="anchor" aria-label="anchor" href="#arg-ndvi-veg"></a></dt>
<dd><p>the NDVI value of vegetation. NDVI values above this threshold will receive an emissivity as defined in emiss_veg</p></dd>


<dt id="arg-ndvi-soil">NDVI_soil<a class="anchor" aria-label="anchor" href="#arg-ndvi-soil"></a></dt>
<dd><p>the NDVI value of bare soil. NDVI values below this threshold will receive an emissivity as defined in emiss_soil</p></dd>


<dt id="arg-emiss-veg">emiss_veg<a class="anchor" aria-label="anchor" href="#arg-emiss-veg"></a></dt>
<dd><p>the emissivity for vegetation, will be taken for an NDVI higher than NDVI_veg</p></dd>


<dt id="arg-emiss-soil">emiss_soil<a class="anchor" aria-label="anchor" href="#arg-emiss-soil"></a></dt>
<dd><p>the emissivity for bare soil, will be taken for an NDVI lower than NDVI_soil</p></dd>


<dt id="arg-lc-emiss-matrix">LC_emiss_matrix<a class="anchor" aria-label="anchor" href="#arg-lc-emiss-matrix"></a></dt>
<dd><p>a two column matrix with the first column the LC values and in the second the corresponding emissivties, only used if method = "LC"</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>returns a thermal map with atmospherically corrected temperatures, and accounted for (spatially varying) emissivity.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christophe Metsu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

